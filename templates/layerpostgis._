<form class='pane editor dark w2 l2' id='layers-<%=obj.id%>'>
  <nav>
    <span class='joined'>
      <a href='#mode-conf' class='button icon conf'></a><!--
      --><a href='#mode-sql' class='button icon edit'></a>
    </span>
    <a href='#' class='button icon close'></a>
  </nav>
  <section>
    <h2>
      <%= obj.id %>
    </h2>
    <input type='hidden' name='id' value='<%=obj.id%>' />
    <input type='hidden' name='name' value='<%=obj.id%>' />
  </section>
  <div class='conf'>
    <section>
      <label class='inline'>Description</label>
      <input class='stretch' type='text' name='description' value='<%= _(obj.description).escape() %>' />
    </section>
    <section>
      <label>PostGIS<label>
      <p class='joined'>
        <input type='text' name='Datasource-user' size='12' value='<%= obj.Datasource.user %>' placeholder='user' /><!--
        --><input type='text' name='Datasource-dbname' size='12' value='<%= obj.Datasource.dbname %>' placeholder='db' /><!--
        --><input type='text' name='Datasource-host' size='12' value='<%= obj.Datasource.host %>' placeholder='host' />
      </p>
      <input type='hidden' name='Datasource-type' value='postgis' />
      <input type='hidden' name='Datasource-max_size' value='512' />
    </section>
    <section>
      <label class='inline'>Extent</label><input type='text' name='Datasource-extent' value='<%= obj.Datasource.extent %>' placeholder='autodetect' />
    </section>
    <section>
      <label class='inline'>Minzoom</label>
      <input id='<%=obj.id%>-minzoom' name='properties-minzoom' class='min' type='range' value='<%= obj.properties.minzoom %>' min='0' max='22' step='1' onchange='rangeHandler(this, "max", "#<%=obj.id%>-maxzoom");' />
      <label class='range' id='<%=obj.id%>-minzoom-val'><%= obj.properties.minzoom %></label>
    </section>
    <section>
      <label class='inline'>Maxzoom</label>
      <input id='<%=obj.id%>-maxzoom' name='properties-maxzoom' class='max' type='range' value='<%= obj.properties.maxzoom %>' min='0' max='22' step='1' onchange='rangeHandler(this, "min", "#<%=obj.id%>-minzoom");' />
      <label class='range' id='<%=obj.id%>-maxzoom-val'><%= obj.properties.maxzoom %></label>
    </section>
    <section>
      <label class='inline'>Buffer size</label>
      <input id='<%=obj.id%>-buffer-size' name='properties-buffer-size' type='range' value='<%= obj.properties['buffer-size'] %>' min='0' max='512' step='4' onchange='rangeHandler(this);'/>
      <label class='range' id='<%=obj.id%>-buffer-size-val'><%= obj.properties['buffer-size'] %></label>
    </section>
    <% if (obj.properties['group-by']) { %>
    <input type='hidden' name='properties-group-by' value='<%=obj.properties['group-by']%>' />
    <% } %>
  </div>
  <div class='sql'>
    <section>
      <span class='joined'>
      <input name='Datasource-geometry_field' placeholder='geometry field' type='text' value='<%= obj.Datasource['geometry_field'] || '' %>'/><!--
      --><input name='Datasource-key_field' placeholder='key field' type='text' value='<%= obj.Datasource['key_field'] || '' %>'/>
      </span>
    </section>
  </div>
</form>
